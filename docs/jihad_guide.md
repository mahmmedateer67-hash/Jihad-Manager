# دليل استخدام Jihad Manager

مرحباً بك يا جهاد في دليل استخدام Jihad Manager! هذا الدليل سيساعدك خطوة بخطوة على فهم وتثبيت واستخدام سكربت Jihad Manager لإدارة خادمك بسهولة. لا تقلق، سنشرح كل شيء بوضوح وبساطة.

## 1. ما هو Jihad Manager؟

Jihad Manager هو سكربت مصمم لمساعدتك في إدارة وظائف خادمك (السيرفر) بكفاءة وسهولة. يتيح لك هذا السكربت إدارة المستخدمين، وإعداد أنفاق DNS المعروفة بـ DNSTT (DNS Tunneling)، والتحكم في سجلات الدومينات الخاصة بك عبر IONOS API، بالإضافة إلى ضبط إعدادات SSH ومراقبة الاتصالات النشطة على خادمك. لقد تم تطويره ليكون سهل الاستخدام ومناسباً حتى للمبتدئين في إدارة الخوادم.

## 2. كيف ترفع الملفات على خادمك؟

للبدء في استخدام Jihad Manager، يجب عليك أولاً نقل ملفات السكربت الأساسية (`jihad_install.sh` و `jihad_menu.sh`) إلى خادمك. توجد عدة طرق لتحقيق ذلك، وسنشرح لك الأكثر شيوعاً وسهولة.

### أ. استخدام GitHub (الطريقة الموصى بها)

تُعد هذه الطريقة الأكثر أماناً وسهولة إذا كان لديك حساب على GitHub. يمكنك رفع الملفات إلى مستودع خاص بك ثم تنزيلها مباشرة على الخادم.

1.  **إنشاء مستودع جديد على GitHub**: ابدأ بإنشاء مستودع جديد على GitHub، ويمكنك تسميته `Jihad-Manager` مثلاً. تأكد من جعله عاماً (Public) لتسهيل عملية التنزيل لاحقاً.
2.  **رفع الملفات**: بعد إنشاء المستودع، قم برفع ملفي `jihad_install.sh` و `jihad_menu.sh` إليه.
3.  **الاتصال بالخادم**: افتح برنامج الاتصال بالخادم، مثل PuTTY لمستخدمي ويندوز أو Terminal لمستخدمي لينكس/ماك، ثم قم بتسجيل الدخول بصلاحيات `root` أو كمستخدم لديه صلاحيات `sudo`.
4.  **تنزيل الملفات**: استخدم الأمر `wget` لتنزيل `jihad_install.sh` مباشرة من GitHub. ستحتاج إلى الحصول على رابط الملف الخام (Raw file link) من المستودع. سيكون الرابط عادةً مشابهاً لهذا النمط:
    ```bash
    wget -O jihad_install.sh https://raw.githubusercontent.com/YOUR_USERNAME/Jihad-Manager/main/jihad_install.sh
    ```
    **ملاحظة هامة**: تذكر استبدال `YOUR_USERNAME` باسم المستخدم الخاص بك على GitHub، وتأكد من أن `Jihad-Manager` هو الاسم الصحيح للمستودع الذي أنشأته.

### ب. استخدام SCP (Secure Copy Protocol)

إذا كنت تفضل طريقة مباشرة لنقل الملفات دون استخدام GitHub، يمكنك الاعتماد على بروتوكول SCP. ستحتاج إلى برنامج يدعم SCP، مثل WinSCP على ويندوز أو استخدام أمر `scp` في Terminal على لينكس/ماك.

*   **لمستخدمي لينكس/ماك (من جهازك الشخصي إلى الخادم)**: استخدم الأوامر التالية لنقل الملفات:
    ```bash
    scp /path/to/your/jihad_install.sh root@your_server_ip:/root/jihad_install.sh
    scp /path/to/your/jihad_menu.sh root@your_server_ip:/root/jihad_menu.sh
    ```
    **ملاحظة**: استبدل `/path/to/your/` بالمسار الفعلي للملفات على جهازك، و `your_server_ip` بعنوان IP الخاص بخادمك.

*   **لمستخدمي ويندوز**: يمكنك استخدام برنامج WinSCP. بعد تسجيل الدخول إلى خادمك، يمكنك سحب وإفلات الملفات مباشرة إلى المجلد المطلوب على الخادم (مثلاً `/root/`).

### ج. استخدام Wget (لتنزيل ملف واحد مباشرة)

في حال توفر لديك رابط مباشر للملفات (على سبيل المثال، إذا قام شخص آخر باستضافتها لك)، يمكنك استخدام `wget` مباشرة على الخادم لتنزيلها:

*   **على خادمك**: قم بتنفيذ الأوامر التالية:
    ```bash
    wget -O jihad_install.sh http://example.com/jihad_install.sh
    wget -O jihad_menu.sh http://example.com/jihad_menu.sh
    ```
    **ملاحظة**: استبدل `http://example.com/` بالرابط الفعلي للملف الذي تريد تنزيله.

## 3. كيف تشغل السكربت من الصفر خطوة بخطوة؟

بعد أن قمت برفع ملف `jihad_install.sh` إلى خادمك (على سبيل المثال، في مجلد `/home/ubuntu/jihad_project/` أو `/root/`)، اتبع هذه الخطوات البسيطة لتشغيل السكربت:

1.  **الاتصال بالخادم**: ابدأ بالاتصال بخادمك باستخدام برنامج SSH المفضل لديك (مثل PuTTY أو Terminal).

2.  **الانتقال إلى مجلد السكربت**: إذا كنت قد رفعت الملف إلى `/home/ubuntu/jihad_project/`، فتوجه إلى هذا المجلد باستخدام الأمر `cd /home/ubuntu/jihad_project/`. أما إذا كان الملف في مجلد `/root/`، فيمكنك البقاء في مجلد الجذر أو الانتقال إليه باستخدام `cd /root/`.

3.  **إعطاء صلاحيات التنفيذ**: من الضروري أن تجعل السكربت قابلاً للتنفيذ. قم بذلك باستخدام الأمر التالي:
    ```bash
    chmod +x jihad_install.sh
    ```

4.  **تشغيل سكربت التثبيت**: الآن، يمكنك تشغيل السكربت. تأكد من أنك تعمل بصلاحيات الجذر (root) عند تنفيذ هذا الأمر:
    ```bash
    ./jihad_install.sh
    ```
    إذا كنت تستخدم `sudo`، فسيكون الأمر كالتالي:
    ```bash
    sudo ./jihad_install.sh
    ```

5.  **اتبع التعليمات**: سيقوم السكربت تلقائياً بتثبيت `jihad_menu.sh` في المسار `/usr/local/bin/jihad_menu`، وسيُطبق إعدادات SSH الضرورية، بالإضافة إلى إعداد خدمة تحديد المستخدمين. قد يطلب منك السكربت تأكيد بعض الإجراءات خلال هذه العملية. انتظر بصبر حتى يكتمل التثبيت بنجاح.

6.  **تشغيل Jihad Manager**: بمجرد اكتمال التثبيت، يمكنك تشغيل القائمة الرئيسية لـ Jihad Manager في أي وقت عن طريق كتابة الأمر التالي:
    ```bash
    jihad_menu
    ```

## 4. شرح وظائف Jihad Manager

عند تشغيل `jihad_menu`، ستظهر لك قائمة رئيسية تحتوي على عدة خيارات. سنشرح لك كل وظيفة بالتفصيل لتتمكن من استخدامها بفعالية.

### أ. إدارة المستخدمين (User Management)

تتيح لك هذه القائمة التحكم الكامل في المستخدمين الذين يمكنهم الاتصال بخادمك عبر بروتوكول SSH. يمكنك القيام بالعديد من العمليات المتعلقة بالمستخدمين:

*   **إنشاء مستخدم جديد**: عند اختيار هذا الخيار، سيطلب منك السكربت إدخال اسم مستخدم جديد، كلمة مرور قوية، عدد أيام صلاحية الحساب (مع إمكانية تعيينه ليكون غير محدود بإدخال `0`)، والحد الأقصى لعدد الاتصالات المتزامنة المسموح بها لهذا المستخدم. سيقوم السكربت بإنشاء حساب نظام جديد وتخزين جميع معلوماته بشكل آمن.
*   **حذف مستخدم**: يتيح لك هذا الخيار اختيار مستخدم من قائمة المستخدمين الموجودين وحذفه نهائياً من النظام وقاعدة البيانات الخاصة بالسكربت.
*   **تعديل مستخدم**: يمكنك من خلال هذه الوظيفة تعديل تفاصيل مستخدم موجود. يمكنك تغيير كلمة المرور الخاصة به، أو تحديث تاريخ انتهاء صلاحية حسابه، أو تعديل الحد الأقصى لعدد الاتصالات المتزامنة.
*   **قفل مستخدم**: يقوم هذا الخيار بقفل حساب المستخدم المحدد، مما يمنعه من تسجيل الدخول إلى الخادم وينهي جميع جلساته النشطة فوراً.
*   **فتح مستخدم**: إذا كان هناك مستخدم مقفل، يمكنك استخدام هذا الخيار لفتح حسابه والسماح له بتسجيل الدخول مرة أخرى.
*   **تجديد صلاحية مستخدم**: يسمح لك بتمديد تاريخ انتهاء صلاحية حساب مستخدم لعدد الأيام الذي تحدده، مما يضمن استمرارية وصوله إلى الخادم.
*   **عرض قائمة المستخدمين**: يعرض هذا الخيار قائمة شاملة بجميع المستخدمين الذين تتم إدارتهم بواسطة Jihad Manager. تتضمن هذه القائمة تفاصيل مهمة مثل تاريخ انتهاء الصلاحية، وعدد الاتصالات النشطة حالياً، وحالة المستخدم (نشط، مغلق، أو منتهي الصلاحية).
*   **تنظيف المستخدمين منتهية الصلاحية**: يقوم هذا الخيار بالبحث عن جميع المستخدمين الذين انتهت صلاحية حساباتهم ويحذفهم تلقائياً من النظام وقاعدة البيانات، مما يساعد في الحفاظ على نظافة الخادم وأمانه.

### ب. DNSTT (أنفاق DNS / Slow DNS)

تُعد وظيفة DNSTT أداة قوية لإنشاء أنفاق DNS، وهي مفيدة بشكل خاص لتجاوز حجب الإنترنت أو جدران الحماية الصارمة. تعمل هذه التقنية عن طريق إخفاء حركة المرور الخاصة بك كاستعلامات DNS عادية، مما يجعلها أقل عرضة للكشف والحظر.

*   **تثبيت/تكوين DNSTT**: عند اختيار هذا الخيار، سيقوم السكربت بتثبيت خدمة DNSTT على خادمك. سيتطلب منك إدخال بعض المعلومات الأساسية:
    *   **نطاق النفق الفرعي**: هذا هو اسم النطاق الفرعي الذي ستستخدمه لإنشاء النفق (مثلاً `tunnel.yourdomain.com`).
    *   **وجهة إعادة التوجيه**: يمكنك تحديد الوجهة التي سيعيد DNSTT توجيه حركة المرور إليها. الخيارات المتاحة هي إما SSH (على المنفذ 22) أو V2Ray (على المنفذ 8787، مع ملاحظة أنه بدون TLS).
    *   **قيمة MTU**: هذه قيمة فنية تتعلق بحجم الحزم. إذا لم تكن متأكداً، يمكنك تركها على القيمة الافتراضية (1350) التي عادة ما تكون مناسبة.
    **ملاحظة هامة**: بعد اكتمال التثبيت، سيُطلب منك إنشاء سجل NS (Name Server) لنطاق النفق الفرعي الذي اخترته (مثلاً `tunnel.yourdomain.com`). يجب أن يشير هذا السجل إلى عنوان IP الخاص بخادمك. يمكنك إنجاز هذه الخطوة بسهولة من خلال قائمة **إدارة الدومينات (IONOS API)** التي سنشرحها في القسم التالي.
*   **عرض تفاصيل DNSTT**: يتيح لك هذا الخيار عرض جميع تفاصيل تكوين DNSTT الحالي على خادمك، بما في ذلك نطاق النفق والمفتاح العام الذي تم توليده.
*   **إلغاء تثبيت DNSTT**: يقوم هذا الخيار بإزالة خدمة DNSTT وجميع الملفات المرتبطة بها من خادمك، مما يعيد النظام إلى حالته الأصلية قبل التثبيت.

### ج. إدارة الدومينات (IONOS API)

تُمكنك هذه القائمة من إدارة سجلات DNS لدومينك الأساسي (`02iuk.shop`) مباشرة من خلال IONOS API. هذه الوظيفة حيوية لإعداد خدمات مثل DNSTT أو أي خدمات أخرى تتطلب تعديلات على سجلات DNS.

*   **عرض جميع سجلات DNS**: يقوم هذا الخيار بجلب وعرض قائمة بجميع سجلات DNS الحالية لدومينك (`02iuk.shop`) من خدمة IONOS. ستظهر لك تفاصيل كل سجل، مثل الاسم، النوع (مثل A أو NS)، المحتوى (مثل عنوان IP)، بالإضافة إلى معرف السجل (ID) الخاص به، والذي يعتبر ضرورياً لعمليات الحذف.
*   **إنشاء سجلات DNS (A و NS)**: تتيح لك هذه الوظيفة إنشاء سجلين أساسيين دفعة واحدة:
    *   **سجل A**: هذا السجل يشير إلى عنوان IP الخاص بخادمك. على سبيل المثال، إذا أدخلت `jihad` كاسم فرعي، فسيتم إنشاء سجل `jihad.02iuk.shop` الذي يشير إلى عنوان IP الحالي لخادمك.
    *   **سجل NS**: يستخدم هذا السجل خصيصاً لإعداد نفق DNS (DNSTT). إذا أدخلت `jihad`، فسيتم إنشاء سجل `tun.jihad.02iuk.shop` وسيكون محتواه `jihad.02iuk.shop`. سيطلب منك السكربت إدخال الاسم الفرعي الذي ترغب فيه (مثلاً `jihad`).
*   **حذف سجلات DNS**: يمكنك استخدام هذا الخيار لحذف سجلات DNS. سيطلب منك إدخال الاسم الكامل أو جزء من الاسم للسجلات التي ترغب في حذفها (مثلاً `jihad.02iuk.shop` أو `tun.jihad.02iuk.shop`). سيقوم السكربت بالبحث عن جميع السجلات المطابقة وعرضها لك، ثم يطلب منك التأكيد قبل الشروع في عملية الحذف.

### د. إعدادات SSH

تتيح لك هذه القائمة إدارة بعض الإعدادات المتعلقة ببروتوكول SSH على خادمك.

*   **إدارة لافتة SSH (SSH Banner)**: من خلال هذا الخيار، يمكنك إنشاء، تعديل، حذف، أو عرض رسالة ترحيب مخصصة تظهر للمستخدمين عند محاولتهم الاتصال بخادمك عبر SSH. هذه اللافتة يمكن أن تحتوي على معلومات هامة أو رسالة ترحيب.

### هـ. مراقبة الاتصالات

*   **مراقبة الاتصالات الحية**: يوفر هذا الخيار أداة لمراقبة الاتصالات النشطة حالياً على خادمك في الوقت الفعلي. ستعرض لك القائمة تفاصيل مثل اسم المستخدم المتصل، عنوان IP الذي يتصل منه، المنفذ المستخدم، ومعرف العملية (PID) المرتبط بالاتصال. يمكنك إيقاف عملية المراقبة في أي وقت بالضغط على `Ctrl+C`.

## 5. الأوامر الأساسية التي تحتاجها

إليك مجموعة من الأوامر الأساسية التي ستكون مفيدة لك عند التعامل مع خادمك واستخدام Jihad Manager:

*   **`jihad_menu`**: هذا الأمر هو نقطة الدخول الرئيسية لتشغيل قائمة Jihad Manager وإدارة خادمك.
*   **`ls`**: يستخدم هذا الأمر لعرض قائمة بالملفات والمجلدات الموجودة في المجلد الحالي الذي تعمل فيه.
*   **`cd <directory_name>`**: يسمح لك هذا الأمر بالانتقال إلى مجلد معين. استبدل `<directory_name>` باسم المجلد الذي تريد الدخول إليه.
*   **`cd ..`**: للعودة إلى المجلد الأب (المجلد السابق) من المجلد الحالي.
*   **`pwd`**: يعرض لك هذا الأمر المسار الكامل للمجلد الحالي الذي تتواجد فيه.
*   **`cat <file_name>`**: يستخدم لعرض محتويات ملف نصي مباشرة في نافذة Terminal. استبدل `<file_name>` باسم الملف.
*   **`nano <file_name>`**: يفتح هذا الأمر ملفاً نصياً في محرر النصوص البسيط `nano`، مما يتيح لك تعديل محتوياته. استبدل `<file_name>` باسم الملف.
*   **`sudo <command>`**: يسمح لك هذا الأمر بتشغيل أي أمر بصلاحيات الجذر (root)، وهو ضروري للعديد من عمليات إدارة النظام، خاصة إذا لم تكن مسجلاً كـ `root` مباشرة.
*   **`systemctl status <service_name>`**: يعرض هذا الأمر حالة خدمة معينة على نظامك، مثل `systemctl status sshd` لمعرفة حالة خدمة SSH.
*   **`systemctl restart <service_name>`**: يستخدم لإعادة تشغيل خدمة معينة، مما يطبق أي تغييرات في الإعدادات.
*   **`systemctl stop <service_name>`**: لإيقاف خدمة معينة عن العمل.
*   **`systemctl enable <service_name>`**: لتمكين خدمة معينة لتبدأ تلقائياً في كل مرة يتم فيها تشغيل الخادم.
*   **`systemctl disable <service_name>`**: لتعطيل خدمة معينة ومنعها من البدء تلقائياً عند تشغيل الخادم.

## 6. نصائح إضافية لجهاد (المبتدئين وضعاف السمع)

بصفتك مستخدماً مبتدئاً، وكونك فاقد السمع، إليك بعض النصائح الإضافية التي ستساعدك على استخدام Jihad Manager بفعالية وأمان:

*   **اقرأ بعناية فائقة**: خذ وقتك الكافي في قراءة كل خيار وتعليمات تظهر لك على الشاشة. لا تتعجل في اتخاذ القرارات. كل رسالة أو سؤال يظهر على الشاشة يحمل معلومات مهمة.
*   **استفد من الألوان**: تم تصميم السكربت باستخدام ألوان مختلفة لمساعدتك على فهم طبيعة الرسائل بسرعة. اللون الأخضر يشير إلى النجاح، الأحمر يدل على وجود خطأ، الأصفر ينبهك إلى تحذير، والأزرق يقدم لك معلومات عامة. هذه الألوان ستكون دليلك البصري.
*   **لا تخف من التجربة (بحذر)**: يمكنك تجربة الوظائف المختلفة للتعرف عليها، ولكن كن حذراً جداً عند تنفيذ عمليات الحذف للمستخدمين أو سجلات الدومينات الحيوية، حيث أن هذه الإجراءات لا يمكن التراجع عنها بسهولة.
*   **النسخ الاحتياطي أمر حيوي**: دائماً، وقبل إجراء أي تغييرات كبيرة على خادمك، تأكد من الاحتفاظ بنسخة احتياطية من جميع ملفاتك وبياناتك الهامة. هذا سيحميك من فقدان البيانات في حال حدوث أي خطأ غير متوقع.
*   **اطلب المساعدة عند الحاجة**: إذا واجهت أي مشكلة أو كان لديك سؤال، فلا تتردد أبداً في طلب المساعدة. يمكنك اللجوء إلى مجتمعات الدعم الفني عبر الإنترنت، أو المنتديات المتخصصة، أو حتى الأصدقاء وزملاء العمل ذوي الخبرة في إدارة الخوادم. هناك دائماً من هو مستعد للمساعدة.

نتمنى لك تجربة موفقة ومثمرة مع Jihad Manager!
